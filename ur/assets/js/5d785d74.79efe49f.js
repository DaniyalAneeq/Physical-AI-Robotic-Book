"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[923],{7970:(e,o,i)=>{i.r(o),i.d(o,{default:()=>s});var n=i(6540),r=i(5465),t=i(4848);function s(){const[e,o]=(0,n.useState)("loading"),[i,s]=(0,n.useState)("Processing OAuth login...");return(0,n.useEffect)(()=>{!async function(){try{const e=window.location.hash.substring(1),i=new URLSearchParams(e),n=i.get("session_token"),r="true"===i.get("onboarding_required");if(!n)return o("error"),void s("No session token received from OAuth provider");const t=("undefined"==typeof window||window.location.hostname,"https://e-book-physical-ai-humanoid-robotics.onrender.com"),a=await fetch(`${t}/auth/session-from-token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n}),credentials:"include"});if(!a.ok){const e=await a.json();throw new Error(e.detail||"Failed to establish session")}const c=await a.json(),l=await fetch(`${t}/auth/session`,{method:"GET",credentials:"include"});if(!l.ok)throw new Error("Session verification failed - cookie not set properly");if((await l.json()).user.id!==c.user.id)throw new Error("Session user mismatch");o("success"),s(`Welcome, ${c.user.name}!`),window.history.replaceState(null,"",window.location.pathname),setTimeout(()=>{window.location.href=r?"/Physical-AI-Robotic-Book/onboarding":"/Physical-AI-Robotic-Book/"},1500)}catch(e){console.error("OAuth callback error:",e),o("error"),s(e instanceof Error?e.message:"Authentication failed"),setTimeout(()=>{window.location.href="/Physical-AI-Robotic-Book/login"},3e3)}}()},[]),(0,t.jsx)(r.A,{title:"Authenticating...",children:(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"60vh",padding:"2rem"},children:["loading"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"spinner",style:{width:"50px",height:"50px",border:"5px solid #f3f3f3",borderTop:"5px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,t.jsx)("p",{style:{marginTop:"1rem",fontSize:"1.2rem"},children:i})]}),"success"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#28a745"},children:[(0,t.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,t.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]}),(0,t.jsx)("p",{style:{marginTop:"1rem",fontSize:"1.2rem",color:"#28a745"},children:i}),(0,t.jsx)("p",{style:{marginTop:"0.5rem",color:"#666"},children:"Redirecting..."})]}),"error"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#dc3545"},children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,t.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),(0,t.jsx)("p",{style:{marginTop:"1rem",fontSize:"1.2rem",color:"#dc3545"},children:i}),(0,t.jsx)("p",{style:{marginTop:"0.5rem",color:"#666"},children:"Redirecting to login..."})]}),(0,t.jsx)("style",{children:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "})]})})}}}]);